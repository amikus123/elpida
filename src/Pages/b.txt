import "slick-carousel/slick/slick.css";
import "slick-carousel/slick/slick-theme.css";
import "react-responsive-carousel/lib/styles/carousel.min.css"; // requires a loader

import Header from "./containers/Header/Header";
import { Switch, Route, useLocation } from "react-router-dom";
import { Reset } from "styled-reset";
import Global from "./styles/global";
import Home from "./Pages/Home";
import Overlay from "./components/core/Overlay/Overlay";
import { ElementProvider } from "./context/ElementContext";
import { ThemeProvider } from "styled-components";
import { lightTheme } from "./styles/themes";
import { DataProvider } from "./context/DataContext";
import SignupPage from "./Pages/SignupPage";

import { UserProvider } from "./context/UserContext";
import LoginPage from "./Pages/LoginPage";
import { ROUTES } from "./constans/routes";
import Dashboard from "./Pages/Dashboard";
import PrivateRoute from "./Pages/CustomRoutes/ProtectedRoute";
import PublicRoute from "./Pages/CustomRoutes/PublicRoute";
import RouteController from "./Pages/CustomRoutes/RouteController";
import ProtectedRoute from "./Pages/CustomRoutes/ProtectedRoute";

function App() {
  const location = useLocation();

  return (
    <>
      <Reset />
      <ThemeProvider theme={lightTheme}>
        <UserProvider>
          <DataProvider>
            <ElementProvider>
              <Global />
              <Overlay />
              {location.pathname !== "/login" &&
              location.pathname !== "/signup" ? (
                <Header />
              ) : null}
              <Switch>
                <Route path={ROUTES.LOGIN} component={LoginPage}></Route>
                <Route path={ROUTES.SIGNUP} component={SignupPage}></Route>
                <Route path={ROUTES.DASHBOARD} component={Dashboard}></Route>
                <ProtectedRoute
                  path={ROUTES.HOME}
                  exact
                  component={Home}
                ></ProtectedRoute>
              </Switch>

              {/* <RouteController
                routeType={'public'}
                component={Home}
                path={ROUTES.HOME}
                exact
             />
             <RouteController
                routeType={'auth'}
                component={LoginPage}
                path={ROUTES.LOGIN}
                exact
             />
             <RouteController
                routeType={'auth'}
                component={SignupPage}
                path={ROUTES.SIGNUP}
                exact
             />
             <RouteController
                routeType={'protected'}
                component={Dashboard}
                path={ROUTES.DASHBOARD}
                exact
             /> */}
            </ElementProvider>
          </DataProvider>
        </UserProvider>
      </ThemeProvider>
    </>
  );
}

export default App;
